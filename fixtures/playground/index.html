<!DOCTYPE html>
<html style="width: 100%; height: 100%; overflow: hidden">
  <head>
    <meta charset="utf-8">
    <title>Fiber Example</title>
  </head>
  <body>
    <div id="container">
      <p>
        To install React, follow the instructions on
        <a href="https://github.com/facebook/react/">GitHub</a>.
      </p>
      <p>
        If you can see this, React is <strong>not</strong> working right.
        If you checked out the source from GitHub make sure to run <code>npm run build</code>.
      </p>
    </div>
    <script src="../../build/oss-experimental/react/umd/react.development.js"></script>
    <script src="../../build/oss-experimental/react-dom/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.js"></script>
    <script type="text/babel">
        const  { createElement, render, useRef, useEffect, useState } = React;
        let DummyRoot 
        const Counter = () => {
        const renderRoot = useRef();
        const [count, setCount] = useState(0);
        useState(8888888);
        useEffect(() => {
          if (count > 0) {
            const div = renderRoot.current;
            if (!DummyRoot) {
                      DummyRoot = ReactDOM.createRoot(div)
                    }
                    DummyRoot.render(
                      <Dummy />
                    );
          }
          return () => 'test';
        }, [count]);

        const increment = () => {
          setCount(x => x + 1);
          setTimeout(() => {
            setCount(x => x + 1);
          });
        };

        return (
          <div onClick={increment}>
            <div>Count: {count}</div>
            <div ref={renderRoot} />
          </div>
        );
      };

      const Dummy = () => {
        useState(999999);
        return <div>dummy</div>;
      };

      ReactDOM.createRoot(document.getElementById('container')).render(
        <Counter />
      );
  </script>
  </body>
</html>
